**ガバナンス ソリューションのケース スタディの設計**

# 原価計算:コストと会計について何を勧めますか？

 ![階層構造](../media/01-01.png)

 - Azure は、コスト管理を実装するための 2 つの方法を提供しています。Azure portal に統合されたコスト管理機能に加え、さらに、Enterprise Agreement サブスクリプションは、アカウント、部門、または Enterprise Agreement レベルで請求をロールアップする機能も提供します。
 - 使用するコスト管理方法に関係なく、最初のステップは、すべての Azure サブスクリプションが適切な階層に編成されていることを確認することです。その後、この階層の各ノードでコストを集計して、ロールアップ レポートを作成できます。Azure portal のコスト管理では、管理グループ階層が使用されます。EA サブスクリプションは、ルート (Enterprise Agreementレベル)、部門、アカウント、およびサブスクリプションで構成される 4 レベルの階層に編成されています。Tailwind Traders には既存の Enterprise Agreement レベルがあることを考えると、同社は Enterprise Agreement の請求と報告のメカニズムを検討する可能性があるでしょう。また、請求およびサブスクリプション管理の観点から整合性を提供するために、管理グループを使用して Enterprise Agreement 階層をミラーリングすることを検討する場合があると考えられます。
 - Tailwind Traders の場合、階層は、テナント ルートの管理グループ、会社のトップレベルの管理グループ、および事業単位ごとの個々の管理グループで構成されます。同様に、これらの各管理グループには、各部門の子管理グループが含まれます。これらの各管理グループには、それぞれの部門に関連付けられたサブスクリプションが含まれます。
 - 各サブスクリプションが個別の請求単位を構成するため、この機能はサブスクリプションに固有の機能に基づいて利用できます。集計請求は、管理グループ レベル (Azure portal のコスト管理を介する) および部門レベル (Enterprise Agreement 階層内) でも利用できます。
 - 全社的な集計請求は、ルート管理グループ レベル (Azure portal のコスト管理を介する)および Enterprise Agreement レベル (Enterprise Agreement 階層内) で利用できます。
 - 各事業単位内の開発、テスト、および運用環境の個々のコスト レポートを作成するには、2 つの方法があります。
   - これらの各環境が異なるサブスクリプションを使用して実装されている場合 (環境間の十分なレベルの分離を提供する場合に推奨)、前述のように、この機能はサブスクリプションに固有の機能に基づいて使用できます。
   - 開発、テスト、および運用リソースが同じサブスクリプションに存在する場合は、それぞれに適切なタグを付けて、その環境を指定する必要があります。タグ情報がコスト レポートに含まれているため、比較的簡単に識別できます。

# 新しい開発プロジェクト:新しい開発プロジェクトには何をお勧めしますか? 

- 新しいプロジェクトに関連するコストを把握する方法はいくつかあります。タグ付けは、プロジェクト リソースを識別するために使用できます。また、タグ付けが適切に行われていることを確認するために Azure Policy を使用できます。別のオプションは、サブスクリプションを使用して請求を報告することです。すべてのリソースをリソース グループに配置できれば、それがソリューションになる可能性があります。
- Azure Policy により、最高価格帯の Azure VM がプロビジョニングされないようにすることもできます。このポリシーは、リソース グループまたはサブスクリプションに適用できます。非準拠のリソースは自動的に識別されます。
- 注意: ルート管理グループ レベルでポリシー定義またはイニシアチブ定義を割り当てることができます。これは、ルートの下の階層内のすべてのサブスクリプションに適用されます。例外を実装する必要がある場合は、サブスクリプション、リソース グループ、または個々のリソースをそのようなポリシーから除外できることに注意してください。